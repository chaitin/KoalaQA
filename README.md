# KoalaQA

<div align="center">

![KoalaQA](https://img.shields.io/badge/KoalaQA-æ™ºèƒ½é—®ç­”ç³»ç»Ÿ-blue.svg)
[![Go](https://img.shields.io/badge/Go-1.25-00ADD8.svg)](https://golang.org/)
[![React](https://img.shields.io/badge/React-19.1.0-61DAFB.svg)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8.3-3178C6.svg)](https://www.typescriptlang.org/)
[![Docker](https://img.shields.io/badge/Docker-æ”¯æŒ-2496ED.svg)](https://www.docker.com/)

**ä¸€ä¸ªåŸºäºRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯çš„æ™ºèƒ½é—®ç­”å’ŒçŸ¥è¯†ç®¡ç†å¹³å°**

</div>

## ğŸŒŸ é¡¹ç›®ç®€ä»‹

KoalaQA æ˜¯ç”±é•¿äº­ç§‘æŠ€å¼€å‘çš„ä¼ä¸šçº§æ™ºèƒ½é—®ç­”å’ŒçŸ¥è¯†ç®¡ç†ç³»ç»Ÿï¼Œé›†æˆäº†å…ˆè¿›çš„RAGæŠ€æœ¯ã€å¤šæ¨¡æ€æ–‡æ¡£å¤„ç†ã€æ™ºèƒ½å¯¹è¯å’Œç¤¾åŒºè®¨è®ºåŠŸèƒ½ã€‚ç³»ç»Ÿæ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼çš„æ™ºèƒ½è§£æï¼Œæä¾›åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½é—®ç­”æœåŠ¡ï¼Œå¹¶å…·å¤‡å®Œæ•´çš„ç”¨æˆ·ç®¡ç†å’Œæƒé™æ§åˆ¶åŠŸèƒ½ã€‚

## ğŸ“¢ å¿«é€Ÿå®‰è£…
```bash
bash -c "$(curl -fsSL https://github.com/chaitin/KoalaQA/raw/refs/heads/main/manager.sh)"
```

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ§  æ™ºèƒ½é—®ç­”ç³»ç»Ÿ
- **RAGæŠ€æœ¯**: åŸºäºæ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯ï¼Œæä¾›å‡†ç¡®çš„çŸ¥è¯†é—®ç­”
- **å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒå¤šç§å¤§è¯­è¨€æ¨¡å‹ï¼ˆChatã€Embeddingã€Rerankï¼‰
- **ä¸Šä¸‹æ–‡ç†è§£**: æ™ºèƒ½ç†è§£å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œæä¾›è¿è´¯çš„å›ç­”
- **å®æ—¶å¯¹è¯**: WebSocketæ”¯æŒçš„å®æ—¶èŠå¤©åŠŸèƒ½

### ğŸ“š çŸ¥è¯†åº“ç®¡ç†
- **å¤šæ ¼å¼æ”¯æŒ**: æ”¯æŒPDFã€DOCXã€PPTXã€Markdownã€HTMLç­‰å¤šç§æ–‡æ¡£æ ¼å¼
- **æ™ºèƒ½è§£æ**: è‡ªåŠ¨æå–æ–‡æ¡£å†…å®¹å¹¶è¿›è¡Œç»“æ„åŒ–å¤„ç†
- **å‘é‡å­˜å‚¨**: åŸºäºQdrantå‘é‡æ•°æ®åº“çš„é«˜æ•ˆæ£€ç´¢
- **æ–‡æ¡£æ‘˜è¦**: AIè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£æ‘˜è¦å’Œå…³é”®ä¿¡æ¯

### ğŸ’¬ ç¤¾åŒºè®¨è®º
- **è®¨è®ºåŒº**: æ”¯æŒQAã€åé¦ˆã€åšå®¢ç­‰å¤šç§è®¨è®ºç±»å‹
- **è¯„è®ºç³»ç»Ÿ**: å®Œæ•´çš„è¯„è®ºå’Œå›å¤åŠŸèƒ½
- **æ ‡ç­¾åˆ†ç±»**: çµæ´»çš„æ ‡ç­¾ç³»ç»Ÿä¾¿äºå†…å®¹åˆ†ç±»
- **æƒé™æ§åˆ¶**: åŸºäºç”¨æˆ·ç»„çš„è®¿é—®æƒé™ç®¡ç†

### ğŸ› ï¸ ç³»ç»Ÿç®¡ç†
- **ç”¨æˆ·ç®¡ç†**: å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€è®¤è¯å’Œæƒé™ç®¡ç†
- **å¤šç§è®¤è¯**: æ”¯æŒå¯†ç è®¤è¯å’ŒOIDCå•ç‚¹ç™»å½•
- **Webhooké›†æˆ**: æ”¯æŒå¤–éƒ¨ç³»ç»Ÿé›†æˆå’Œäº‹ä»¶é€šçŸ¥
- **ç³»ç»Ÿé…ç½®**: çµæ´»çš„ç³»ç»Ÿå‚æ•°é…ç½®

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **Go 1.25**: é«˜æ€§èƒ½çš„åç«¯æœåŠ¡
- **Gin**: è½»é‡çº§Webæ¡†æ¶
- **GORM**: å¼ºå¤§çš„ORMæ¡†æ¶
- **PostgreSQL**: ä¸»æ•°æ®åº“
- **Qdrant**: å‘é‡æ•°æ®åº“
- **NATS**: æ¶ˆæ¯é˜Ÿåˆ—
- **MinIO**: å¯¹è±¡å­˜å‚¨
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 19**: ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ
- **Material-UI**: Google Material Designç»„ä»¶åº“
- **Vite**: å¿«é€Ÿçš„æ„å»ºå·¥å…·
- **Next.js**: å…¨æ ˆReactæ¡†æ¶ï¼ˆå‰å°ï¼‰

### AIä¸æ•°æ®å¤„ç†
- **ModelKit**: é•¿äº­ç§‘æŠ€çš„AIæ¨¡å‹ç®¡ç†æ¡†æ¶
- **Eino**: æ™ºèƒ½å¯¹è¯å¼•æ“
- **RAGLite**: è½»é‡çº§RAGæœåŠ¡
- **AnyDoc**: æ–‡æ¡£å¤„ç†æœåŠ¡

## ğŸ“ é¡¹ç›®ç»“æ„

```
koalaqa/
â”œâ”€â”€ backend/                    # Goåç«¯æœåŠ¡
â”‚   â”œâ”€â”€ cmd/server/            # æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ model/                 # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ repo/                  # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ svc/                   # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ router/                # è·¯ç”±å±‚
â”‚   â”œâ”€â”€ pkg/                   # å…¬å…±åŒ…
â”‚   â”‚   â”œâ”€â”€ rag/              # RAGæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ llm/              # å¤§è¯­è¨€æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ oss/              # å¯¹è±¡å­˜å‚¨
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ migration/            # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ ui/                       # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ admin/                # ç®¡ç†åå°ï¼ˆReact+Viteï¼‰
â”‚   â””â”€â”€ front/                # ç”¨æˆ·å‰å°ï¼ˆNext.jsï¼‰
â”œâ”€â”€ docker/                   # Dockeré…ç½®
â”œâ”€â”€ data/                     # æ•°æ®ç›®å½•
â””â”€â”€ docker-compose.yml        # å®¹å™¨ç¼–æ’
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Docker** >= 20.0
- **Docker Compose** >= 2.0
- **Go** >= 1.25ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- **Node.js** >= 18ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

### ä¸€é”®éƒ¨ç½²

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/chaitin/koalaqa.git
cd koalaqa
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
vim .env
```

å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š
```bash
# æ•°æ®åº“å¯†ç 
DB_PASSWORD=your_db_password

# å¯¹è±¡å­˜å‚¨å¯†é’¥
OSS_SECRET_KEY=your_oss_secret

# æ¶ˆæ¯é˜Ÿåˆ—å¯†ç 
MQ_PASSWORD=your_mq_password

# å‘é‡æ•°æ®åº“APIå¯†é’¥
QDRANT_API_KEY=your_qdrant_key

# ç½‘ç»œä»£ç†ï¼ˆå¯é€‰ï¼‰
HTTP_PROXY=http://proxy:port
HTTPS_PROXY=https://proxy:port
```

3. **å¯åŠ¨æœåŠ¡**
```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
make run.all

# æˆ–è€…ä»…å¯åŠ¨åº”ç”¨æœåŠ¡
make run
```

4. **è®¿é—®åº”ç”¨**
- å‰å°åº”ç”¨: http://localhost
- ç®¡ç†åå°: http://localhost/admin
- APIæ–‡æ¡£: http://localhost/swagger/index.html

### å¼€å‘ç¯å¢ƒ

#### åç«¯å¼€å‘

```bash
cd backend

# å®‰è£…ä¾èµ–
go mod download

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
go run cmd/server/main.go
```

#### å‰ç«¯å¼€å‘

```bash
# ç®¡ç†åå°
cd ui/admin
pnpm install
pnpm dev

# ç”¨æˆ·å‰å°
cd ui/front
pnpm install
pnpm dev
```

## ğŸ“ é…ç½®è¯´æ˜

### å¤§è¯­è¨€æ¨¡å‹é…ç½®

ç³»ç»Ÿæ”¯æŒå¤šç§å¤§è¯­è¨€æ¨¡å‹æä¾›å•†ï¼š

- **OpenAI**: GPT-3.5ã€GPT-4ç³»åˆ—
- **DeepSeek**: DeepSeek Chatç³»åˆ—
- **Google Gemini**: Gemini Proç³»åˆ—
- **Ollama**: æœ¬åœ°éƒ¨ç½²æ¨¡å‹
- **å…¶ä»–**: å…¼å®¹OpenAI APIçš„æ¨¡å‹

### æ–‡æ¡£å¤„ç†é…ç½®

æ”¯æŒçš„æ–‡æ¡£æ ¼å¼ï¼š
- **æ–‡æœ¬**: Markdownã€HTMLã€TXT
- **Office**: DOCXã€DOCã€PPTXã€XLSXã€XLS
- **PDF**: æ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡æå–
- **å›¾ç‰‡**: PNGã€JPGã€JPEGç­‰
- **å‹ç¼©åŒ…**: ZIPæ–‡ä»¶
- **ç”µå­ä¹¦**: EPUBæ ¼å¼

### ç¬¬ä¸‰æ–¹é›†æˆ

- **OIDCè®¤è¯**: æ”¯æŒä¼ä¸šå•ç‚¹ç™»å½•
- **Webhook**: æ”¯æŒå¤–éƒ¨ç³»ç»Ÿäº‹ä»¶é€šçŸ¥
- **APIæ¥å£**: å®Œæ•´çš„RESTful API

## ğŸ”§ APIæ–‡æ¡£

ç³»ç»Ÿæä¾›å®Œæ•´çš„Swagger APIæ–‡æ¡£ï¼Œå¯åŠ¨æœåŠ¡åè®¿é—®ï¼š
- http://localhost/swagger/index.html

ä¸»è¦APIç«¯ç‚¹ï¼š
- `/api/v1/auth/*` - è®¤è¯ç›¸å…³
- `/api/v1/discussions/*` - è®¨è®ºç®¡ç†
- `/api/v1/knowledge-bases/*` - çŸ¥è¯†åº“ç®¡ç†
- `/api/v1/llm/*` - AIæ¨¡å‹è°ƒç”¨
- `/admin/api/v1/*` - ç®¡ç†å‘˜æ¥å£

## ğŸ“Š ç³»ç»Ÿç›‘æ§

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f koala-qa-api
docker-compose logs -f koala-qa-app
```

### å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# æ£€æŸ¥APIå¥åº·çŠ¶æ€
curl http://localhost/api/health
```

## ğŸ›¡ï¸ å®‰å…¨è¯´æ˜

### æ•°æ®å®‰å…¨
- æ‰€æœ‰æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- æ”¯æŒHTTPSä¼ è¾“åŠ å¯†
- å®Œæ•´çš„ç”¨æˆ·æƒé™æ§åˆ¶

### è®¿é—®æ§åˆ¶
- åŸºäºJWTçš„èº«ä»½è®¤è¯
- ç»†ç²’åº¦çš„æƒé™ç®¡ç†
- APIè®¿é—®é¢‘ç‡é™åˆ¶

### éƒ¨ç½²å®‰å…¨
- å®¹å™¨éš”ç¦»éƒ¨ç½²
- ç½‘ç»œå®‰å…¨é…ç½®
- å®šæœŸå®‰å…¨æ›´æ–°

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

1. **Forké¡¹ç›®**åˆ°ä½ çš„GitHubè´¦æˆ·
2. **åˆ›å»ºåˆ†æ”¯**: `git checkout -b feature/your-feature`
3. **æäº¤æ›´æ”¹**: `git commit -m 'Add your feature'`
4. **æ¨é€åˆ†æ”¯**: `git push origin feature/your-feature`
5. **åˆ›å»ºPull Request**

### å¼€å‘è§„èŒƒ

- éµå¾ªGoå’ŒTypeScriptçš„æœ€ä½³å®è·µ
- ç¼–å†™å®Œæ•´çš„å•å…ƒæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ä¿æŒä»£ç é£æ ¼ä¸€è‡´

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache 2.0](LICENSE) è®¸å¯è¯ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š
- [Gin](https://github.com/gin-gonic/gin) - Webæ¡†æ¶
- [GORM](https://github.com/go-gorm/gorm) - ORMæ¡†æ¶
- [React](https://github.com/facebook/react) - å‰ç«¯æ¡†æ¶
- [Material-UI](https://github.com/mui/material-ui) - UIç»„ä»¶åº“
- [Qdrant](https://github.com/qdrant/qdrant) - å‘é‡æ•°æ®åº“

## ğŸ“ æ”¯æŒä¸è”ç³»

- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/chaitin/koalaqa/issues)
- **åŠŸèƒ½å»ºè®®**: [GitHub Discussions](https://github.com/chaitin/koalaqa/discussions)
- **å®˜æ–¹ç½‘ç«™**: [é•¿äº­ç§‘æŠ€](https://www.chaitin.cn)

---

<div align="center">

**è®©çŸ¥è¯†ç®¡ç†æ›´æ™ºèƒ½ï¼Œè®©é—®ç­”æ›´ç²¾å‡†** ğŸ¨

Made with â¤ï¸ by [é•¿äº­ç§‘æŠ€](https://www.chaitin.cn)

</div>
